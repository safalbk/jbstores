{% load static %}
{% include 'book/main-template.html' %}
{% block content %}
<div class="container" style="margin-top: 80px;">
  <div class="row mb-3">
    <div class="col">
      <a class="btn btn-primary" href="{% url 'book:add_person' %}" role="button">
        <i class="bi bi-plus-circle"></i> Add
      </a>
    </div>
  </div>

  <div class="row">
    <div class="col">
      <table id="personsTable" class="display table table-striped table-bordered" style="width:100%">
        <thead>
          <tr>
            <th>#</th>
            <th>Name</th>
            <th>Borrow</th>
            <th>Actions</th>
          </tr>
        </thead>
        <tbody>
          {% if persons %}
          {% for p in persons %}
          <tr>
            <td>{{ forloop.counter }}</td>
            <td>{{ p.name }}</td>
            <td>
              {% if p.borrow < 0 %}
                <span class="text-danger fw-bold">{{ p.borrow }}</span>
              {% else %}
                <span class="text-success fw-bold">{{ p.borrow }}</span>
              {% endif %}
            </td>
            <td>
              <a class="btn btn-outline-dark btn-sm me-2" 
                 href="{% url 'book:personlist' p.name %}">
                <i class="bi bi-arrow-up-square"></i> Open
              </a>
              <a class="btn btn-outline-dark btn-sm"
                 href="{% url 'book:edit_person' p.id %}">
                <i class="bi bi-pen"></i> Edit
              </a>
            </td>
          </tr>
          {% endfor %}
          {% endif %}
        </tbody>
      </table>
    </div>
  </div>
</div>



<script>
  $(document).ready(function() {
    $('#personsTable').DataTable({
      "pageLength": 10,
      "lengthMenu": [5, 10, 25, 50],
      "ordering": true,
      "searching": true
    });
  });
</script>


{% endblock %}